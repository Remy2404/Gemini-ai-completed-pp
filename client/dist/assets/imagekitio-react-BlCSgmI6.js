import{r as O,R as ue}from"./react-BDj6g8P4.js";import{P as p}from"./prop-types-Dq9A4-Vv.js";function Q(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Q=function(t){return typeof t}:Q=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Q(e)}function Ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Oe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ae(e,t,r){return t&&Oe(e.prototype,t),e}function ye(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function le(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?le(Object(r),!0).forEach(function(n){ye(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):le(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Te(e,t){if(e){if(typeof e=="string")return ce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ce(e,t)}}function ce(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _e(e,t){var r;if(typeof Symbol>"u"||e[Symbol.iterator]==null){if(Array.isArray(e)||(r=Te(e))||t){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(l){throw l},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u=!0,c=!1,d;return{s:function(){r=e[Symbol.iterator]()},n:function(){var l=r.next();return u=l.done,l},e:function(l){c=!0,d=l},f:function(){try{!u&&r.return!=null&&r.return()}finally{if(c)throw d}}}}var Ne="3.0.0",T={MANDATORY_INITIALIZATION_MISSING:{message:"Missing urlEndpoint during SDK initialization",help:""},INVALID_TRANSFORMATION_POSITION:{message:"Invalid transformationPosition parameter",help:""},PRIVATE_KEY_CLIENT_SIDE:{message:"privateKey should not be passed on the client side",help:""},MISSING_UPLOAD_DATA:{message:"Missing data for upload",help:""},MISSING_UPLOAD_FILE_PARAMETER:{message:"Missing file parameter for upload",help:""},MISSING_UPLOAD_FILENAME_PARAMETER:{message:"Missing fileName parameter for upload",help:""},MISSING_AUTHENTICATION_ENDPOINT:{message:"Missing authentication endpoint for upload",help:""},MISSING_PUBLIC_KEY:{message:"Missing public key for upload",help:""},AUTH_ENDPOINT_TIMEOUT:{message:"The authenticationEndpoint you provided timed out in 60 seconds",help:""},AUTH_ENDPOINT_NETWORK_ERROR:{message:"Request to authenticationEndpoint failed due to network error",help:""},AUTH_INVALID_RESPONSE:{message:"Invalid response from authenticationEndpoint. The SDK expects a JSON response with three fields i.e. signature, token and expire.",help:""},UPLOAD_ENDPOINT_NETWORK_ERROR:{message:"Request to ImageKit upload endpoint failed due to network error",help:""},INVALID_UPLOAD_OPTIONS:{message:"Invalid uploadOptions parameter",help:""},MISSING_SIGNATURE:{message:"Missing signature for upload. The SDK expects token, sginature and expire for authentication.",help:""},MISSING_TOKEN:{message:"Missing token for upload. The SDK expects token, sginature and expire for authentication.",help:""},MISSING_EXPIRE:{message:"Missing expire for upload. The SDK expects token, sginature and expire for authentication.",help:""},INVALID_TRANSFORMATION:{message:"Invalid transformation parameter. Please include at least pre, post, or both.",help:""},INVALID_PRE_TRANSFORMATION:{message:"Invalid pre transformation parameter.",help:""},INVALID_POST_TRANSFORMATION:{message:"Invalid post transformation parameter.",help:""}};function _(e,t,r){typeof r=="function"&&(e?r(t,null):r(null,t))}function xe(e){var t={},r=e.getAllResponseHeaders();return Object.keys(r).length&&r.trim().split(/[\r\n]+/).map(function(n){return n.split(/: /)}).forEach(function(n){t[n[0].trim()]=n[1].trim()}),t}var de=function(t,r){var n=B({},t),a={statusCode:r.status,headers:xe(r)};return Object.defineProperty(n,"$ResponseMetadata",{value:a,enumerable:!1,writable:!1}),n},Me=function(t,r,n){Re(t,r).then(function(a){return _(!1,a,n)},function(a){return _(!0,a,n)})},Re=function(t,r){return new Promise(function(n,a){t.open("POST","https://upload.imagekit.io/api/v1/files/upload"),t.onerror=function(u){return a(T.UPLOAD_ENDPOINT_NETWORK_ERROR)},t.onload=function(){if(t.status===200)try{var u=JSON.parse(t.responseText),c=de(u,t);return n(c)}catch(l){return a(l)}else try{var u=JSON.parse(t.responseText),d=de(u,t);return a(d)}catch(l){return a(l)}},t.send(r)})},Le=function(t,r,n,a){if(!r.file){_(!0,T.MISSING_UPLOAD_FILE_PARAMETER,a);return}if(!r.fileName){_(!0,T.MISSING_UPLOAD_FILENAME_PARAMETER,a);return}if(!n.publicKey){_(!0,T.MISSING_PUBLIC_KEY,a);return}if(!r.token){_(!0,T.MISSING_TOKEN,a);return}if(!r.signature){_(!0,T.MISSING_SIGNATURE,a);return}if(!r.expire){_(!0,T.MISSING_EXPIRE,a);return}if(r.transformation){if(!(Object.keys(r.transformation).includes("pre")||Object.keys(r.transformation).includes("post"))){_(!0,T.INVALID_TRANSFORMATION,a);return}if(Object.keys(r.transformation).includes("pre")&&!r.transformation.pre){_(!0,T.INVALID_PRE_TRANSFORMATION,a);return}if(Object.keys(r.transformation).includes("post"))if(Array.isArray(r.transformation.post)){var u=_e(r.transformation.post),c;try{for(u.s();!(c=u.n()).done;){var d=c.value;if(d.type==="abs"&&!(d.protocol||d.value)){_(!0,T.INVALID_POST_TRANSFORMATION,a);return}else if(d.type==="transformation"&&!d.value){_(!0,T.INVALID_POST_TRANSFORMATION,a);return}}}catch(b){u.e(b)}finally{u.f()}}else{_(!0,T.INVALID_POST_TRANSFORMATION,a);return}}var l=new FormData,m;for(m in r)m&&(m==="file"&&typeof r.file!="string"?l.append("file",r.file,String(r.fileName)):m==="tags"&&Array.isArray(r.tags)?l.append("tags",r.tags.join(",")):m==="signature"?l.append("signature",r.signature):m==="expire"?l.append("expire",String(r.expire)):m==="token"?l.append("token",r.token):m==="responseFields"&&Array.isArray(r.responseFields)?l.append("responseFields",r.responseFields.join(",")):m==="extensions"&&Array.isArray(r.extensions)?l.append("extensions",JSON.stringify(r.extensions)):m==="customMetadata"&&Q(r.customMetadata)==="object"&&!Array.isArray(r.customMetadata)&&r.customMetadata!==null?l.append("customMetadata",JSON.stringify(r.customMetadata)):m==="transformation"&&Q(r.transformation)==="object"&&r.transformation!==null?l.append(m,JSON.stringify(r.transformation)):r[m]!==void 0&&l.append(m,String(r[m])));l.append("publicKey",n.publicKey),Me(t,l,a)},me={width:"w",height:"h",aspectRatio:"ar",quality:"q",crop:"c",cropMode:"cm",focus:"fo",x:"x",y:"y",format:"f",radius:"r",background:"bg",border:"b",rotation:"rt",rotate:"rt",blur:"bl",named:"n",progressive:"pr",lossless:"lo",trim:"t",metadata:"md",colorProfile:"cp",defaultImage:"di",dpr:"dpr",effectSharpen:"e-sharpen",effectUSM:"e-usm",effectContrast:"e-contrast",effectGray:"e-grayscale",original:"orig",effectShadow:"e-shadow",effectGradient:"e-gradient",raw:"raw"},pe="path",Ie="query",Ce=[pe,Ie],je=":",De=",",Ke="-",H={getDefault:function(){return pe},addAsQueryParameter:function(t){return t.transformationPosition===Ie},validParameters:function(t){return typeof t.transformationPosition>"u"?!1:Ce.indexOf(t.transformationPosition)!=-1},getTransformKey:function(t){return t&&(me[t]||me[t.toLowerCase()])||""},getChainTransformDelimiter:function(){return je},getTransformDelimiter:function(){return De},getTransformKeyValueDelimiter:function(){return Ke}},he="tr";function Ue(e){return typeof e=="string"&&e[e.length-1]=="/"&&(e=e.substring(0,e.length-1)),e}function Fe(e){return typeof e=="string"&&e[0]=="/"&&(e=e.slice(1)),e}function ee(e,t){var r="/",n=new RegExp(r+"{1,}","g");return e.join(r).replace(n,r)}var qe=function(t){if(!t.path&&!t.src)return"";var r,n,a;try{t.path?(a=new URL(t.urlEndpoint).pathname,r=new URL(ee([t.urlEndpoint.replace(a,""),t.path]))):(r=new URL(t.src),n=!0)}catch(d){return console.error(d),""}for(var u in t.queryParameters)r.searchParams.append(u,String(t.queryParameters[u]));var c=Ge(t.transformation);return c&&c.length&&(H.addAsQueryParameter(t)||n?r.searchParams.append(he,c):r.pathname=ee([he+H.getChainTransformDelimiter()+c,r.pathname])),a?r.pathname=ee([a,r.pathname]):r.pathname=ee([r.pathname]),r.href};function Ge(e){if(!Array.isArray(e))return"";for(var t=[],r=0,n=e.length;r<n;r++){var a=[];for(var u in e[r])if(!(e[r][u]===void 0||e[r][u]===null)){var c=H.getTransformKey(u);if(c||(c=u),e[r][u]==="-")a.push(c);else if(u==="raw")a.push(e[r][u]);else{var d=e[r][u];c==="di"&&(d=Ue(Fe(d||"")),d=d.replace(/\//g,"@@")),a.push([c,d].join(H.getTransformKeyValueDelimiter()))}}t.push(a.join(H.getTransformDelimiter()))}return t.join(H.getChainTransformDelimiter())}var ke=function(t,r){return qe(B(B({},r),t))};function Ve(e){return e.urlEndpoint}var $e=function(t,r){return function(){for(var n=arguments.length,a=new Array(n),u=0;u<n;u++)a[u]=arguments[u];if(a.length===r.length&&typeof a[a.length-1]<"u"){if(typeof a[a.length-1]!="function")throw new Error("Callback must be a function.");r.call.apply(r,[t].concat(a))}else return new Promise(function(c,d){var l=function(b){if(b)return d(b);for(var w=arguments.length,E=new Array(w>1?w-1:0),R=1;R<w;R++)E[R-1]=arguments[R];c(E.length>1?E:E[0])};a.pop(),a.push(l),r.call.apply(r,[t].concat(a))})}},se=function(){function e(t){if(Ee(this,e),ye(this,"options",{sdkVersion:"javascript-".concat(Ne),publicKey:"",urlEndpoint:"",transformationPosition:H.getDefault()}),this.options=B(B({},this.options),t||{}),!Ve(this.options))throw T.MANDATORY_INITIALIZATION_MISSING;if(!H.validParameters(this.options))throw T.INVALID_TRANSFORMATION_POSITION}return Ae(e,[{key:"url",value:function(r){return ke(r,this.options)}},{key:"upload",value:function(r,n,a){var u;if(typeof n=="function"?u=n:a=n||{},!r||Q(r)!=="object")return _(!0,T.INVALID_UPLOAD_OPTIONS,u);var c=B(B({},this.options),a),d=r||{},l=d.xhr;delete r.xhr;var m=l||new XMLHttpRequest;return $e(this,Le)(m,r,c,u)}}]),e}();function ze(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,u,c,d=[],l=!0,m=!1;try{if(u=(r=r.call(e)).next,t!==0)for(;!(l=(n=u.call(r)).done)&&(d.push(n.value),d.length!==t);l=!0);}catch(b){m=!0,a=b}finally{try{if(!l&&r.return!=null&&(c=r.return(),Object(c)!==c))return}finally{if(m)throw a}}return d}}function ve(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ve(Object(r),!0).forEach(function(n){Je(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ve(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ie(){ie=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(o,i,s){o[i]=s.value},u=typeof Symbol=="function"?Symbol:{},c=u.iterator||"@@iterator",d=u.asyncIterator||"@@asyncIterator",l=u.toStringTag||"@@toStringTag";function m(o,i,s){return Object.defineProperty(o,i,{value:s,enumerable:!0,configurable:!0,writable:!0}),o[i]}try{m({},"")}catch{m=function(i,s,h){return i[s]=h}}function b(o,i,s,h){var f=i&&i.prototype instanceof U?i:U,v=Object.create(f.prototype),y=new D(h||[]);return a(v,"_invoke",{value:Z(o,s,y)}),v}function w(o,i,s){try{return{type:"normal",arg:o.call(i,s)}}catch(h){return{type:"throw",arg:h}}}t.wrap=b;var E="suspendedStart",R="suspendedYield",G="executing",N="completed",g={};function U(){}function k(){}function L(){}var F={};m(F,c,function(){return this});var W=Object.getPrototypeOf,V=W&&W(W(K([])));V&&V!==r&&n.call(V,c)&&(F=V);var j=L.prototype=U.prototype=Object.create(F);function $(o){["next","throw","return"].forEach(function(i){m(o,i,function(s){return this._invoke(i,s)})})}function q(o,i){function s(f,v,y,I){var P=w(o[f],o,v);if(P.type!=="throw"){var S=P.arg,A=S.value;return A&&typeof A=="object"&&n.call(A,"__await")?i.resolve(A.__await).then(function(C){s("next",C,y,I)},function(C){s("throw",C,y,I)}):i.resolve(A).then(function(C){S.value=C,y(S)},function(C){return s("throw",C,y,I)})}I(P.arg)}var h;a(this,"_invoke",{value:function(f,v){function y(){return new i(function(I,P){s(f,v,I,P)})}return h=h?h.then(y,y):y()}})}function Z(o,i,s){var h=E;return function(f,v){if(h===G)throw new Error("Generator is already running");if(h===N){if(f==="throw")throw v;return{value:e,done:!0}}for(s.method=f,s.arg=v;;){var y=s.delegate;if(y){var I=J(y,s);if(I){if(I===g)continue;return I}}if(s.method==="next")s.sent=s._sent=s.arg;else if(s.method==="throw"){if(h===E)throw h=N,s.arg;s.dispatchException(s.arg)}else s.method==="return"&&s.abrupt("return",s.arg);h=G;var P=w(o,i,s);if(P.type==="normal"){if(h=s.done?N:R,P.arg===g)continue;return{value:P.arg,done:s.done}}P.type==="throw"&&(h=N,s.method="throw",s.arg=P.arg)}}}function J(o,i){var s=i.method,h=o.iterator[s];if(h===e)return i.delegate=null,s==="throw"&&o.iterator.return&&(i.method="return",i.arg=e,J(o,i),i.method==="throw")||s!=="return"&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+s+"' method")),g;var f=w(h,o.iterator,i.arg);if(f.type==="throw")return i.method="throw",i.arg=f.arg,i.delegate=null,g;var v=f.arg;return v?v.done?(i[o.resultName]=v.value,i.next=o.nextLoc,i.method!=="return"&&(i.method="next",i.arg=e),i.delegate=null,g):v:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,g)}function z(o){var i={tryLoc:o[0]};1 in o&&(i.catchLoc=o[1]),2 in o&&(i.finallyLoc=o[2],i.afterLoc=o[3]),this.tryEntries.push(i)}function x(o){var i=o.completion||{};i.type="normal",delete i.arg,o.completion=i}function D(o){this.tryEntries=[{tryLoc:"root"}],o.forEach(z,this),this.reset(!0)}function K(o){if(o||o===""){var i=o[c];if(i)return i.call(o);if(typeof o.next=="function")return o;if(!isNaN(o.length)){var s=-1,h=function f(){for(;++s<o.length;)if(n.call(o,s))return f.value=o[s],f.done=!1,f;return f.value=e,f.done=!0,f};return h.next=h}}throw new TypeError(typeof o+" is not iterable")}return k.prototype=L,a(j,"constructor",{value:L,configurable:!0}),a(L,"constructor",{value:k,configurable:!0}),k.displayName=m(L,l,"GeneratorFunction"),t.isGeneratorFunction=function(o){var i=typeof o=="function"&&o.constructor;return!!i&&(i===k||(i.displayName||i.name)==="GeneratorFunction")},t.mark=function(o){return Object.setPrototypeOf?Object.setPrototypeOf(o,L):(o.__proto__=L,m(o,l,"GeneratorFunction")),o.prototype=Object.create(j),o},t.awrap=function(o){return{__await:o}},$(q.prototype),m(q.prototype,d,function(){return this}),t.AsyncIterator=q,t.async=function(o,i,s,h,f){f===void 0&&(f=Promise);var v=new q(b(o,i,s,h),f);return t.isGeneratorFunction(i)?v:v.next().then(function(y){return y.done?y.value:v.next()})},$(j),m(j,l,"Generator"),m(j,c,function(){return this}),m(j,"toString",function(){return"[object Generator]"}),t.keys=function(o){var i=Object(o),s=[];for(var h in i)s.push(h);return s.reverse(),function f(){for(;s.length;){var v=s.pop();if(v in i)return f.value=v,f.done=!1,f}return f.done=!0,f}},t.values=K,D.prototype={constructor:D,reset:function(o){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(x),!o)for(var i in this)i.charAt(0)==="t"&&n.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var o=this.tryEntries[0].completion;if(o.type==="throw")throw o.arg;return this.rval},dispatchException:function(o){if(this.done)throw o;var i=this;function s(P,S){return v.type="throw",v.arg=o,i.next=P,S&&(i.method="next",i.arg=e),!!S}for(var h=this.tryEntries.length-1;h>=0;--h){var f=this.tryEntries[h],v=f.completion;if(f.tryLoc==="root")return s("end");if(f.tryLoc<=this.prev){var y=n.call(f,"catchLoc"),I=n.call(f,"finallyLoc");if(y&&I){if(this.prev<f.catchLoc)return s(f.catchLoc,!0);if(this.prev<f.finallyLoc)return s(f.finallyLoc)}else if(y){if(this.prev<f.catchLoc)return s(f.catchLoc,!0)}else{if(!I)throw new Error("try statement without catch or finally");if(this.prev<f.finallyLoc)return s(f.finallyLoc)}}}},abrupt:function(o,i){for(var s=this.tryEntries.length-1;s>=0;--s){var h=this.tryEntries[s];if(h.tryLoc<=this.prev&&n.call(h,"finallyLoc")&&this.prev<h.finallyLoc){var f=h;break}}f&&(o==="break"||o==="continue")&&f.tryLoc<=i&&i<=f.finallyLoc&&(f=null);var v=f?f.completion:{};return v.type=o,v.arg=i,f?(this.method="next",this.next=f.finallyLoc,g):this.complete(v)},complete:function(o,i){if(o.type==="throw")throw o.arg;return o.type==="break"||o.type==="continue"?this.next=o.arg:o.type==="return"?(this.rval=this.arg=o.arg,this.method="return",this.next="end"):o.type==="normal"&&i&&(this.next=i),g},finish:function(o){for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i];if(s.finallyLoc===o)return this.complete(s.completion,s.afterLoc),x(s),g}},catch:function(o){for(var i=this.tryEntries.length-1;i>=0;--i){var s=this.tryEntries[i];if(s.tryLoc===o){var h=s.completion;if(h.type==="throw"){var f=h.arg;x(s)}return f}}throw new Error("illegal catch attempt")},delegateYield:function(o,i,s){return this.delegate={iterator:K(o),resultName:i,nextLoc:s},this.method==="next"&&(this.arg=e),g}},t}function Ye(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function He(e){var t=Ye(e,"string");return typeof t=="symbol"?t:String(t)}function ae(e){"@babel/helpers - typeof";return ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ae(e)}function ge(e,t,r,n,a,u,c){try{var d=e[u](c),l=d.value}catch(m){r(m);return}d.done?t(l):Promise.resolve(l).then(n,a)}function We(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var u=e.apply(t,r);function c(l){ge(u,n,a,c,d,"next",l)}function d(l){ge(u,n,a,c,d,"throw",l)}c(void 0)})}}function Je(e,t,r){return t=He(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function te(){return te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},te.apply(this,arguments)}function Be(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,u;for(u=0;u<n.length;u++)a=n[u],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function Se(e,t){if(e==null)return{};var r=Be(e,t),n,a;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(a=0;a<u.length;a++)n=u[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Y(e,t){return Xe(e)||ze(e,t)||be(e,t)||rt()}function Qe(e){return Ze(e)||et(e)||be(e)||tt()}function Ze(e){if(Array.isArray(e))return oe(e)}function Xe(e){if(Array.isArray(e))return e}function et(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function be(e,t){if(e){if(typeof e=="string")return oe(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oe(e,t)}}function oe(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function tt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var fe={publicKey:p.string,urlEndpoint:p.string,authenticator:p.func},nt=M(M({},fe),{},{transformationPosition:p.oneOf(["path","query"])}),it=M(M({},nt),{},{ikClient:p.instanceOf(se)}),re=O.createContext({}),gt=function(t){var r=function(c){for(var d={},l=Object.keys(it),m=0;m<l.length;m++){var b=l[m],w=c[b];w&&(d[b]=w)}return d},n=M({},t),a=r(n);return a.urlEndpoint&&a.urlEndpoint.trim()!==""&&(a.ikClient=new se({urlEndpoint:a.urlEndpoint,sdkVersion:""})),ue.createElement(re.Provider,{value:a},t.children)},at={loading:p.oneOf(["lazy"]),lqip:p.shape({active:p.bool,quality:p.number,threshold:p.number,blur:p.number,raw:p.string}),path:p.string,src:p.string,queryParameters:p.objectOf(p.oneOfType([p.string,p.number]).isRequired),transformation:p.arrayOf(p.object.isRequired),transformationPosition:p.oneOf(["path","query"])},ot=M(M({},fe),at),ut=function(){try{return navigator.connection.effectiveType}catch{return"4g"}},st=function(t,r,n){var a=t.urlEndpoint,u=t.lqip,c=t.src,d=t.path,l=t.transformation,m=t.transformationPosition,b=t.queryParameters,w;if(c)w={urlEndpoint:a||n.urlEndpoint,src:c,transformation:l||void 0,transformationPosition:m||n.transformationPosition||void 0,queryParameters:b||{}};else if(d)w={urlEndpoint:a||n.urlEndpoint,path:d,transformation:l||void 0,transformationPosition:m||n.transformationPosition||void 0,queryParameters:b||{}};else return{originalSrc:""};var E={originalSrc:r.url(w)};if(u&&u.active){var R=Math.round(u.quality||u.threshold||20),G=Math.round(u.blur||6),N=w.transformation?Qe(w.transformation):[];u.raw&&typeof u.raw=="string"&&u.raw.trim()!==""?N.push({raw:u.raw.trim()}):N.push({quality:String(R),blur:String(G)}),E.lqipSrc=r.url(M(M({},w),{},{transformation:N}))}return E},ft=function(t,r){var n=t.lqip,a=n===void 0?null:n,u=t.loading,c=r.intersected,d=r.originalSrcLoaded,l=r.originalSrc,m=r.lqipSrc,b=function(E){return E&&E.active};return u!=="lazy"&&!b(a)?l:u!=="lazy"&&b(a)?d?l:m:u==="lazy"&&!b(a)?c?l:"":c&&d?l:m},we=function(t){var r=O.useContext(re),n=function(){if(r&&r.ikClient)return r.ikClient;var u=t.urlEndpoint;if(u=u||r&&r.urlEndpoint,!u||u.trim()==="")throw new Error("Missing urlEndpoint during initialization");var c=new se({urlEndpoint:u,sdkVersion:""});return c};return{getIKClient:n}},lt=["urlEndpoint","authenticator","publicKey","loading","lqip","path","src","transformation","transformationPosition","queryParameters"],ct=function(t){var r=O.useRef(null),n=we(M({},t)),a=n.getIKClient,u=O.useContext(re),c=O.useState(void 0),d=Y(c,2),l=d[0],m=d[1],b=O.useState(""),w=Y(b,2),E=w[0],R=w[1],G=O.useState(""),N=Y(G,2),g=N[0],U=N[1],k=O.useState(!1),L=Y(k,2),F=L[0],W=L[1],V=O.useState(void 0),j=Y(V,2),$=j[0],q=j[1],Z=O.useState(!1),J=Y(Z,2),z=J[0],x=J[1],D=O.useState(!1),K=Y(D,2),o=K[0],i=K[1];O.useEffect(function(){var v=st(t,a(),u),y=v.originalSrc,I=v.lqipSrc;R(y),U(I||""),x(!0)},[u,t]);var s=function(){var v=We(ie().mark(function y(){var I;return ie().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,ft(t,{originalSrc:E,lqipSrc:g,intersected:o,contextOptions:u,initialzeState:z,originalSrcLoaded:F,observe:$});case 2:I=S.sent,I&&m(I);case 4:case"end":return S.stop()}},y)}));return function(){return v.apply(this,arguments)}}(),h=function(){var y=new Image;y.onload=function(){W(!0)},y.src=E};O.useEffect(function(){F&&s()},[F]),O.useEffect(function(){var v=r.current,y=t.loading;if(z)if(window&&"IntersectionObserver"in window&&y==="lazy"){var I=ut(),P="1250px";I!=="4g"&&(P="2500px");var S=new IntersectionObserver(function(A){var C=A[0];C&&C.isIntersecting&&!o&&(i(!0),q(function(X){X&&X.disconnect()}),h(),s())},{rootMargin:"".concat(P," 0px ").concat(P," 0px")});v&&(S.observe(v),q(S))}else i(!0),h(),s();return function(){$&&$.disconnect()}},[t,E,g]),t.urlEndpoint,t.authenticator,t.publicKey,t.loading,t.lqip,t.path,t.src,t.transformation,t.transformationPosition,t.queryParameters;var f=Se(t,lt);return ue.createElement("img",te({alt:t.alt||"",src:l||"",ref:r},f))};ct.propTypes=ot;var dt={path:p.string,src:p.string,queryParameters:p.objectOf(p.oneOfType([p.string,p.number]).isRequired),transformation:p.arrayOf(p.object.isRequired),transformationPosition:p.oneOf(["path","query"])};M(M({},fe),dt);var mt=["publicKey","urlEndpoint","authenticator","fileName","useUniqueFileName","tags","folder","isPrivateFile","customCoordinates","responseFields","onError","onSuccess","onUploadStart","onUploadProgress","validateFile","webhookUrl","overwriteFile","overwriteAITags","overwriteTags","overwriteCustomMetadata","extensions","customMetadata","transformation","overrideParameters"],yt=O.forwardRef(function(e,t){var r=O.useState({}),n=Y(r,2),a=n[0],u=n[1],c=O.useContext(re),d=we(M({},e)),l=d.getIKClient;O.useEffect(function(){var z=function(){a.xhr&&a.xhr.abort()};if(t&&ae(t)==="object"&&t.hasOwnProperty("current")){var x=t;x.current.abort=z}},[a.xhr,t]),e.publicKey,e.urlEndpoint,e.authenticator;var m=e.fileName,b=e.useUniqueFileName,w=e.tags,E=e.folder,R=e.isPrivateFile,G=e.customCoordinates,N=e.responseFields,g=e.onError,U=e.onSuccess;e.onUploadStart,e.onUploadProgress,e.validateFile;var k=e.webhookUrl,L=e.overwriteFile,F=e.overwriteAITags,W=e.overwriteTags,V=e.overwriteCustomMetadata,j=e.extensions,$=e.customMetadata,q=e.transformation;e.overrideParameters;var Z=Se(e,mt),J=function(x){var D,K=e.publicKey||c.publicKey,o=e.authenticator||c.authenticator,i=e.urlEndpoint||c.urlEndpoint;if(!K||K.trim()===""){console.error("Missing publicKey"),g&&typeof g=="function"&&g({message:"Missing publicKey"});return}if(!o){console.error("The authenticator function is not provided."),g&&typeof g=="function"&&g({message:"The authenticator function is not provided."});return}if(typeof o!="function"){console.error("The provided authenticator is not a function."),g&&typeof g=="function"&&g({message:"The provided authenticator is not a function."});return}if(!i||i.trim()===""){console.error("Missing urlEndpoint"),g&&typeof g=="function"&&g({message:"Missing urlEndpoint"});return}var s=l(),h=(D=x.target.files)===null||D===void 0?void 0:D[0];if(h&&!(e.validateFile&&!e.validateFile(h))){e.onUploadStart&&typeof e.onUploadStart=="function"&&e.onUploadStart(x);var f={};e.overrideParameters&&typeof e.overrideParameters=="function"&&(f=e.overrideParameters(h)||{});var v=new XMLHttpRequest,y=function(A){e.onUploadProgress&&typeof e.onUploadProgress=="function"&&e.onUploadProgress(A)};v.upload.addEventListener("progress",y);var I={file:h,fileName:f.fileName||m||h.name,useUniqueFileName:f.useUniqueFileName||b,tags:f.tags||w,folder:f.folder||E,isPrivateFile:f.isPrivateFile||R,customCoordinates:f.customCoordinates||G,responseFields:N,extensions:f.extensions||j,webhookUrl:f.webhookUrl||k,overwriteFile:f.overwriteFile||L,overwriteAITags:f.overwriteAITags||F,overwriteTags:f.overwriteTags||W,overwriteCustomMetadata:f.overwriteCustomMetadata||V,customMetadata:f.customMetadata||$,signature:"",expire:0,token:"",xhr:v,transformation:f.transformation||q},P=o();if(!(P instanceof Promise)){g&&typeof g=="function"&&g({message:"The authenticator function is expected to return a Promise instance."});return}P.then(function(S){var A=S.signature,C=S.token,X=S.expire;I.signature=A,I.expire=X,I.token=C,s.upload(I,function(ne,Pe){ne?g&&typeof g=="function"&&(console.log(ne),g(ne)):U&&typeof U=="function"&&U(Pe),v.upload.removeEventListener("progress",y)},{publicKey:K}),u({xhr:v})}).catch(function(S){var A;S instanceof Array?A=S[0]:A=S,g&&typeof g=="function"&&g({message:String(A)})})}};return ue.createElement("input",te({},Z,{ref:t,type:"file",onChange:function(x){e.onChange&&typeof e.onChange=="function"&&e.onChange(x),J(x)}}))});export{gt as I,yt as a,ct as b};
